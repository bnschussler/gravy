<!DOCTYPE html>
<html>
	<head>
		<style>

			.row:after {
			  content: "";
			  display: table;
			  clear: both;
			}

			.col{
				float: left;
				width: 200px;
				height: 350px;
				padding: 10px;
			}

			.break{
				margin-top:25px;
			}

			p{
				margin:0px;
			}

			p.nobr{
				display:inline;
			}

			.small{
				width: 4ch;
			}



		</style>
		<script type="text/javascript" src="processing.js"></script>
			
	</head>
	<body>
		<h1>Gravy: A Galaxy Simulation</h1>
		<br>
		<p> This is my attempt at a simulation of galaxy formation! the solid circles are regular matter particles, and the hollow ones are dark matter. As the matter collides, it forms a disk, while the non-colliding dark matter stays as a sphere.
		<br><br> This simulation isn't very true to real life, as everything is simplified for optimization purposes; additionally, rounding errors in the collision handler tends to dump extra angular momentum into the system. Nevertheless, it looks pretty and is fun to mess with! </p>
		
		<div class="row">
			<div id="not_advanced">
				<div class="col">
					<input type="button" onclick="Processing.getInstanceById('sketch').reset()" value="Reset"/>
					<br><p class="nobr"># of particles:</p>
					<input type="text" id="ntext" value="200" class="break small" />
					<input type="range" value="200" id="nslider" min="0" max="1500" />
					<br><p class="nobr">gravity strength:</p>
					<input type="text" id="gtext" value="10" class="break small" />
					<input type="range" value="20" id="gslider" min="0" max="100" />
					<br><p class="nobr">% dark matter:</p>
					<input type="text" id="darktext" value="50" class="break small"/>
					<input type="range" value="50" id="darkslider" min="0" max="100" />
				</div>
				<div class="col">
					<p>show bounding box</p>
					<input type="checkbox" id="box" checked/>
					<p class="break">bound particles</p>
					<input type="checkbox" id="bound" checked/>
					<p class="break">show axes</p>
					<input type="checkbox" id="axes"/>
					<p class="break">show angular momentum</p>
					<input type="checkbox" id="w"/>
					<p class="break">isometric</p>
					<input type="checkbox" id="isometric"/>
				</div>
			</div>
			<div id="advanced" style="display: none">
				<div class="col">
					<p class="nobr">particle size:</p>
					<input type="text" id="sizetext" value="10" class="small"/>
					<input type="range" value="20" id="sizeslider" min="0" max="100" />
					<br><p class="nobr">box size:</p>
					<input type="text" id="boxtext" value="400" class="break small"/>
					<input type="range" value="400" id="boxslider" min="0" max="400" />
					<br><p class="nobr">initial velocity:</p>
					<input type="text" id="startveltext" value="6" class="break small"/>
					<input type="range" value="6" id="startvelslider" min="0" max="40" />
					<br><p class="nobr">initial radius:</p>
					<input type="text" id="startpostext" value="400" class="break small"/>
					<input type="range" value="400" id="startposslider" min="0" max="400" />
					<p class="break">center camera</p>
					<input type="checkbox" id="centerCamera"/>
				</div>
				<div class="col">
					<p class="nobr"># of dimensions:</p>
					<input type="number" value="3" id="dimensions" min="0" step="1"/>
					<br><br>
					<p>Press 'Q' to change the rotation axes <br> (try this in 4+ dimensions!)</p>
					<br>
					<p>Press 'A' to reset the rotation</p>
				</div>
			</div>
			<div class="col">
				<canvas id="sketch" data-processing-sources="gravy.pde"></canvas>
			</div>
		</div>
		<p class="break">Advanced</p>
		<input id="showAdvanced" type="checkbox" onchange="
			updateVisibility(this.checked,'advanced');
			updateVisibility(!this.checked,'not_advanced');"/>
		<script src="inputHandling.js"></script>
		<script>
			setTimeout(function(){ //the worst workaround to things not loading in time: just wait a fixed amount before trying once. Luckily, it's not that bad if this fails the first time, since everything re-updates as soon as any settings are changed.
					updateVisibility(document.getElementById('showAdvanced').checked,'advanced');
					updateVisibility(!document.getElementById('showAdvanced').checked,'not_advanced');
					updateSettings('sketch');
				}, 250);
		</script>
	</body>
</html>
